<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>4 x 40 B-Day-Bash - Partybeitr√§ge</title>
<meta content="Partybeitr√§ge f√ºr die 4 x 40 B-Day-Bash Party am 01.-03.08.2025 im Anglerheim Jena" name="description"/>
<meta content="Birthday Party, Partybeitr√§ge, Geburtstag, Party, Jena" name="keywords"/>

<style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: 'Orbitron', monospace;
        background: linear-gradient(135deg, #1a0033 0%, #2d1b4e 50%, #4a0e4e 100%);
        min-height: 100vh;
        color: #ffffff;
        overflow-x: hidden;
    }
    
    .stars {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
    }
    
    .star {
        position: absolute;
        width: 2px;
        height: 2px;
        background: #ffffff;
        border-radius: 50%;
        animation: twinkle 2s infinite alternate;
    }
    
    @keyframes twinkle {
        0% { opacity: 0.3; }
        100% { opacity: 1; }
    }
    
    .neon-lines {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
    }
    
    .neon-line {
        position: absolute;
        height: 2px;
        background: linear-gradient(90deg, transparent, #ff00ff, transparent);
        animation: neon-sweep 4s linear infinite;
    }
    
    @keyframes neon-sweep {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100vw); }
    }

    .laser-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -2;
        overflow: hidden;
    }

    .laser-beam {
        position: absolute;
        width: 1px;
        height: 100vh;
        background: linear-gradient(0deg, 
            transparent 0%, 
            rgba(0, 255, 255, 0.1) 20%, 
            rgba(255, 0, 255, 0.15) 50%, 
            rgba(0, 255, 255, 0.1) 80%, 
            transparent 100%);
        animation: laser-move 8s linear infinite;
        opacity: 0.6;
    }

    .laser-beam:nth-child(2) {
        animation-delay: -2s;
        background: linear-gradient(0deg, 
            transparent 0%, 
            rgba(255, 0, 255, 0.1) 20%, 
            rgba(0, 255, 255, 0.15) 50%, 
            rgba(255, 0, 255, 0.1) 80%, 
            transparent 100%);
    }

    .laser-beam:nth-child(3) {
        animation-delay: -4s;
        animation-duration: 10s;
    }

    .laser-beam:nth-child(4) {
        animation-delay: -6s;
        animation-duration: 12s;
        background: linear-gradient(0deg, 
            transparent 0%, 
            rgba(255, 255, 0, 0.08) 20%, 
            rgba(255, 0, 255, 0.12) 50%, 
            rgba(255, 255, 0, 0.08) 80%, 
            transparent 100%);
    }

    @keyframes laser-move {
        0% { 
            left: -10px; 
            transform: rotate(1deg);
        }
        25% { 
            left: 25%; 
            transform: rotate(-0.5deg);
        }
        50% { 
            left: 50%; 
            transform: rotate(0.8deg);
        }
        75% { 
            left: 75%; 
            transform: rotate(-0.3deg);
        }
        100% { 
            left: calc(100% + 10px); 
            transform: rotate(0.5deg);
        }
    }
    
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        position: relative;
    }
    
    .header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: rgba(0, 0, 0, 0.3);
        border: 2px solid #ff00ff;
        border-radius: 15px;
        box-shadow: 0 0 30px rgba(255, 0, 255, 0.3);
    }
    
    .title {
        font-size: clamp(1.8rem, 6vw, 3rem);
        font-weight: 900;
        color: #ff00ff;
        text-shadow: 0 0 20px #ff00ff;
        margin-bottom: 10px;
        letter-spacing: 3px;
        word-wrap: break-word;
        overflow-wrap: break-word;
        line-height: 1.2;
    }
    
    .date {
        font-size: clamp(1rem, 3vw, 1.5rem);
        color: #00ffff;
        text-shadow: 0 0 10px #00ffff;
        margin-bottom: 20px;
        letter-spacing: 2px;
    }
    
    .subtitle {
        font-size: clamp(0.9rem, 2.5vw, 1.2rem);
        color: #ffffff;
        opacity: 0.8;
    }
    
    .items-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
    }
    
    .section-title {
        font-size: clamp(1.5rem, 4vw, 2rem);
        font-weight: 900;
        color: #ff00ff;
        text-shadow: 0 0 15px rgba(255, 0, 255, 0.8);
        text-align: center;
        margin: 40px 0 30px;
        letter-spacing: 2px;
    }

    .section-title.highlighted-plus {
        font-size: clamp(1.8rem, 4.5vw, 2.5rem);
        color: #ffff00;
        text-shadow: 0 0 20px #ffff00, 0 0 30px rgba(255, 255, 0, 0.8);
        animation: pulse-plus 1.5s infinite alternate;
    }

    @keyframes pulse-plus {
        0% {
            transform: scale(1);
            opacity: 1;
        }
        100% {
            transform: scale(1.05);
            opacity: 0.9;
        }
    }
    
    .additional-section {
        margin-top: 50px;
    }
    
    .add-item-card {
        background: rgba(0, 0, 0, 0.2);
        border: 2px dashed #666;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
        overflow: visible;
    }
    
    .add-item-card:hover {
        border-color: #ff00ff;
        box-shadow: 0 0 20px rgba(255, 0, 255, 0.1);
    }
    
    .add-item-title {
        color: #ffff00;
        font-size: 1.5rem;
        text-shadow: 0 0 15px #ffff00;
        font-size: 1.2rem;
        font-weight: 700;
        color: #ff00ff;
        margin-bottom: 15px;
        text-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
    }
    
    .add-item-controls {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .add-item-input {
        flex: 1;
        min-width: 200px;
        padding: 10px;
        border: 2px solid #333;
        border-radius: 5px;
        background: rgba(0, 0, 0, 0.7);
        color: #ffffff;
        font-family: 'Orbitron', monospace;
        font-size: 1rem;
    }
    
    .add-item-input:focus {
        outline: none;
        border-color: #ff00ff;
        box-shadow: 0 0 10px rgba(255, 0, 255, 0.3);
    }
    
    .btn-add {
        font-size: 1.1rem;
        font-weight: 900;
        box-shadow: 0 0 20px rgba(255, 0, 255, 0.6);
        background: linear-gradient(45deg, #ff00ff, #00ffff);
        color: #000;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-family: 'Orbitron', monospace;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        font-size: 0.9rem;
    }
    
    .btn-add:hover {
        box-shadow: 0 0 15px rgba(255, 0, 255, 0.5);
        transform: translateY(-2px);
    }
    
    .additional-items-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }
    
    .additional-item-card {
        background: rgba(0, 0, 0, 0.3);
        border: 2px solid #666;
        border-radius: 10px;
        padding: 20px;
        transition: all 0.3s ease;
        position: relative;
        overflow: visible;
    }
    
    .additional-item-card:hover {
        border-color: #00ffff;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.1);
    }
    
    .additional-item-name {
        font-size: 1.2rem;
        font-weight: 700;
        color: #00ffff;
        margin-bottom: 10px;
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }
    
    .additional-note {
        font-size: 0.8rem;
        color: #888;
        font-style: italic;
        margin-bottom: 15px;
    }
    
    .item-card {
        background: rgba(0, 0, 0, 0.4);
        border: 2px solid #333;
        border-radius: 10px;
        padding: 20px;
        transition: all 0.3s ease;
        position: relative;
        overflow: visible;
    }
    
    .item-card:hover {
        border-color: #ff00ff;
        box-shadow: 0 0 20px rgba(255, 0, 255, 0.2);
    }
    
    .item-card.taken {
        border-color: #00ff00;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
    }
    
    .item-name {
        font-size: 1.3rem;
        font-weight: 700;
        color: #ffffff;
        margin-bottom: 10px;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .item-counter {
        font-size: 0.9rem;
        color: #00ffff;
        margin-bottom: 15px;
        text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
    }
    
    .persons-list {
        margin-bottom: 15px;
        max-height: 150px;
        overflow-y: auto;
    }
    
    .person-entry {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        margin-bottom: 5px;
        background: rgba(0, 255, 0, 0.1);
        border: 1px solid rgba(0, 255, 0, 0.3);
        border-radius: 5px;
        transition: all 0.3s ease;
    }
    
    .person-entry:hover {
        background: rgba(0, 255, 0, 0.2);
        border-color: rgba(0, 255, 0, 0.5);
    }
    
    .person-name {
        color: #00ff00;
        font-weight: 600;
        text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
    }
    
    .btn-small {
        padding: 4px 8px;
        border: none;
        border-radius: 3px;
        font-family: 'Orbitron', monospace;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.8rem;
    }
    
    .btn-small.btn-unregister {
        background: linear-gradient(45deg, #ff4444, #ff6666);
        color: #fff;
    }
    
    .btn-small.btn-unregister:hover {
        background: linear-gradient(45deg, #ff6666, #ff8888);
        transform: scale(1.1);
    }
    
    .complete-message {
        color: #00ff00;
        font-weight: 700;
        font-size: 1.1rem;
        text-align: center;
        text-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
        animation: neon-pulse 2s ease-in-out infinite;
    }
    
    .item-controls {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
    }
    
    .name-input {
        flex: 1;
        padding: 10px;
        border: 2px solid #333;
        border-radius: 5px;
        background: rgba(0, 0, 0, 0.7);
        color: #ffffff;
        font-family: 'Orbitron', monospace;
        font-size: 1rem;
        min-width: 150px;
    }
    
    .name-input:focus {
        outline: none;
        border-color: #ff00ff;
        box-shadow: 0 0 10px rgba(255, 0, 255, 0.3);
    }
    
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-family: 'Orbitron', monospace;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        font-size: 0.9rem;
    }
    
    .btn-take {
        background: linear-gradient(45deg, #ff00ff, #00ffff);
        color: #000;
    }
    
    .btn-take:hover {
        box-shadow: 0 0 15px rgba(255, 0, 255, 0.5);
        transform: translateY(-2px);
    }
    
    .btn-release {
        background: linear-gradient(45deg, #ff4444, #ff6666);
        color: #fff;
    }
    
    .btn-release:hover {
        box-shadow: 0 0 15px rgba(255, 68, 68, 0.5);
        transform: translateY(-2px);
    }
    
    .btn-unregister {
        background: linear-gradient(45deg, #ffaa00, #ff6600);
        color: #fff;
        margin-left: 10px;
    }
    
    .btn-unregister:hover {
        box-shadow: 0 0 15px rgba(255, 170, 0, 0.5);
        transform: translateY(-2px);
    }
    
    .taken-by {
        color: #00ff00;
        font-weight: 700;
        text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        flex: 1;
    }
    
    .taken-controls {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
    }
    
    /* Sync Status */
    .sync-status {
        text-align: center;
        margin-top: 15px;
        padding: 15px;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 10px;
        border: 2px solid #333;
        position: relative;
        z-index: 2;
    }
    
    .sync-status.connected {
        border-color: #00ff00;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
    }
    
    .sync-status.disconnected {
        border-color: #ff4444;
        box-shadow: 0 0 20px rgba(255, 68, 68, 0.2);
    }
    
    .sync-status.syncing {
        border-color: #ffaa00;
        box-shadow: 0 0 20px rgba(255, 170, 0, 0.2);
    }
    
    .status-text {
        font-weight: 700;
        font-size: 0.9rem;
    }
    
    .sync-details {
        font-size: 0.8rem;
        opacity: 0.7;
        margin-top: 5px;
    }
    
    /* Thank You Animation Overlay */
    .thank-you-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }
    
    .thank-you-overlay.show {
        opacity: 1;
        pointer-events: all;
    }
    
    .thank-you-content {
        text-align: center;
        position: relative;
    }
    
    .thank-you-text {
        font-size: 4rem;
        font-weight: 900;
        color: #ff00ff;
        text-shadow: 0 0 30px #ff00ff;
        margin-bottom: 20px;
        animation: glitch 0.5s ease-in-out infinite alternate;
        font-size: clamp(2rem, 8vw, 4rem);
        padding: 0 10px;
        white-space: normal;
        word-break: break-word;
    }
    
    .thank-you-subtext {
        font-size: 1.5rem;
        color: #00ffff;
        text-shadow: 0 0 20px #00ffff;
        animation: neon-pulse 1s ease-in-out infinite;
        font-size: clamp(1rem, 4vw, 1.5rem);
        padding: 0 10px;
        white-space: normal;
        word-break: break-word;
    }
    
    .retro-grid {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 800px;
        height: 600px;
        background: linear-gradient(
            90deg,
            transparent 49%,
            #ff00ff 50%,
            #ff00ff 51%,
            transparent 52%
        ),
        linear-gradient(
            0deg,
            transparent 49%,
            #ff00ff 50%,
            #ff00ff 51%,
            transparent 52%
        );
        background-size: 40px 40px;
        opacity: 0.3;
        animation: grid-move 2s linear infinite;
        z-index: -1;
    }
    
    .laser-lines {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: visible;
        z-index: -1;
    }
    
    .laser-line {
        position: absolute;
        height: 2px;
        background: linear-gradient(90deg, transparent, #00ffff, transparent);
        animation: laser-sweep 1s linear infinite;
        box-shadow: 0 0 10px #00ffff;
    }
    
    @keyframes glitch {
        0% {
            transform: translateX(0);
            text-shadow: 0 0 30px #ff00ff;
        }
        25% {
            transform: translateX(-5px);
            text-shadow: -5px 0 30px #ff00ff, 5px 0 30px #00ffff;
        }
        50% {
            transform: translateX(5px);
            text-shadow: 5px 0 30px #ff00ff, -5px 0 30px #00ffff;
        }
        75% {
            transform: translateX(-2px);
            text-shadow: -2px 0 30px #ff00ff, 2px 0 30px #00ffff;
        }
        100% {
            transform: translateX(0);
            text-shadow: 0 0 30px #ff00ff;
        }
    }
    
    @keyframes neon-pulse {
        0%, 100% {
            text-shadow: 0 0 20px #00ffff;
        }
        50% {
            text-shadow: 0 0 40px #00ffff, 0 0 60px #00ffff;
        }
    }
    
    @keyframes grid-move {
        0% {
            transform: translate(-50%, -50%);
        }
        100% {
            transform: translate(-50%, -70%);
        }
    }
    
    @keyframes laser-sweep {
        0% {
            left: -100%;
            top: 20%;
        }
        100% {
            left: 100%;
            top: 80%;
        }
    }
    
    /* Particle-Effekt */
    .particle {
        position: absolute;
        width: 3px;
        height: 3px;
        background: #00ffff;
        border-radius: 50%;
        pointer-events: none;
        animation: particle-float 4s ease-out forwards;
    }
    
    .particle:nth-child(odd) {
        background: #ff00ff;
        animation-delay: 0.1s;
    }
    
    .particle:nth-child(3n) {
        background: #ffffff;
        animation-delay: 0.2s;
    }
    
    .particle-orange {
        background: #ffaa00;
    }
    
    .particle-orange:nth-child(odd) {
        background: #ff6600;
    }
    
    @keyframes particle-float {
        0% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        100% {
            opacity: 0;
            transform: translateY(-50px) scale(0.5);
        }
    }
    
    /* Matrix-Effekt */
    .matrix-effect {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: visible;
        pointer-events: none;
        z-index: 99;
    }
    
    .matrix-line {
        position: absolute;
        width: 2px;
        height: 20px;
        background: linear-gradient(to bottom, transparent, #00ffff, transparent);
        animation: matrix-fall 4s linear forwards;
    }
    
    .matrix-line-orange {
        background: linear-gradient(to bottom, transparent, #ffaa00, transparent);
    }
    
    @keyframes matrix-fall {
        0% {
            top: -20px;
            opacity: 0;
        }
        50% {
            opacity: 1;
        }
        100% {
            top: 100%;
            opacity: 0;
        }
    }
    
    /* Scanline-Effekt */
    .scanline {
        position: absolute;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, transparent, #00ffff, transparent);
        top: 50%;
        left: 0;
        animation: scanline-sweep 3s ease-out;
        z-index: 98;
    }
    
    .scanline-orange {
        background: linear-gradient(90deg, transparent, #ffaa00, transparent);
    }
    
    @keyframes scanline-sweep {
        0% {
            transform: translateY(-100px);
            opacity: 0;
        }
        50% {
            opacity: 1;
        }
        100% {
            transform: translateY(100px);
            opacity: 0;
        }
    }
    
    /* Export Section */
    .export-section {
        text-align: center;
        margin-bottom: 30px;
        display: none;
        position: relative;
        z-index: 2;
    }
    
    .export-btn {
        background: linear-gradient(45deg, #00ffff, #ff00ff);
        color: #000;
        padding: 15px 30px;
        border: none;
        border-radius: 10px;
        font-family: 'Orbitron', monospace;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        margin: 0 10px;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
    }
    
    .export-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
    }
    
    .export-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    /* Admin Login Section */
    .admin-section {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        border: 2px solid #333;
        position: relative;
        overflow: visible;
    }
    
    .admin-login {
        display: block;
        position: relative;
        z-index: 2;
    }
    
    .admin-controls {
        display: none;
        position: relative;
        z-index: 2;
    }
    
    .admin-login-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, transparent, rgba(255, 0, 255, 0.1), transparent);
        animation: admin-bg-pulse 3s ease-in-out infinite;
        z-index: 1;
    }
    
    .admin-title {
        color: #ff00ff;
        font-size: clamp(1.3rem, 3vw, 1.8rem);
        font-weight: 900;
        margin-bottom: 30px;
        text-shadow: 0 0 20px rgba(255, 0, 255, 0.8);
        animation: admin-title-glow 2s ease-in-out infinite alternate;
        letter-spacing: 2px;
    }
    
    .admin-input-container {
        position: relative;
        display: inline-block;
        margin-bottom: 20px;
    }
    
    .admin-input {
        padding: 15px 20px;
        border: 2px solid #333;
        border-radius: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: #ffffff;
        font-family: 'Orbitron', monospace;
        font-size: 1.1rem;
        width: 300px;
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
        z-index: 2;
    }
    
    .admin-input::placeholder {
        color: rgba(255, 255, 255, 0.5);
        font-style: italic;
    }
    
    .admin-input:focus {
        outline: none;
        border-color: #ff00ff;
        box-shadow: 0 0 25px rgba(255, 0, 255, 0.5);
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.05);
    }
    
    .admin-input-glow {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 2px solid transparent;
        border-radius: 10px;
        background: linear-gradient(45deg, #ff00ff, #00ffff, #ff00ff);
        background-size: 200% 200%;
        animation: admin-input-border 3s ease-in-out infinite;
        z-index: 1;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .admin-input:focus + .admin-input-glow {
        opacity: 1;
    }
    
    .admin-btn {
        background: linear-gradient(45deg, #ff00ff, #00ffff);
        color: #000;
        padding: 15px 35px;
        border: none;
        border-radius: 10px;
        font-family: 'Orbitron', monospace;
        font-weight: 900;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        font-size: 1.1rem;
        letter-spacing: 1px;
        box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
    }
    
    .admin-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 0 35px rgba(255, 0, 255, 0.7);
        background: linear-gradient(45deg, #00ffff, #ff00ff);
    }
    
    .admin-panel {
        margin-top: 20px;
        padding: 25px;
        background: rgba(0, 0, 0, 0.4);
        border-radius: 15px;
        border: 2px solid #00ff00;
        box-shadow: 0 0 30px rgba(0, 255, 0, 0.3);
        position: relative;
        overflow: visible;
    }
    
    .admin-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, transparent, rgba(0, 255, 0, 0.05), transparent);
        animation: admin-panel-pulse 4s ease-in-out infinite;
    }
    
    .admin-panel h3 {
        color: #00ff00;
        margin-bottom: 20px;
        text-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
        font-size: 1.5rem;
        font-weight: 900;
        letter-spacing: 1px;
        position: relative;
        z-index: 2;
    }
    
    .logout-btn {
        background: linear-gradient(45deg, #ff4444, #ff6666);
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-family: 'Orbitron', monospace;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        float: right;
        box-shadow: 0 0 15px rgba(255, 68, 68, 0.3);
        position: relative;
        z-index: 2;
    }
    
    .logout-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 25px rgba(255, 68, 68, 0.6);
    }
    
    .footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        border: 2px solid #333;
    }
    
    .footer h3 {
        color: #ff00ff;
        margin-bottom: 10px;
        text-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
    }
    
    @keyframes admin-bg-pulse {
        0%, 100% {
            opacity: 0.3;
        }
        50% {
            opacity: 0.7;
        }
    }
    
    @keyframes admin-title-glow {
        0% {
            text-shadow: 0 0 20px rgba(255, 0, 255, 0.8);
        }
        100% {
            text-shadow: 0 0 30px rgba(255, 0, 255, 1), 0 0 40px rgba(0, 255, 255, 0.5);
        }
    }
    
    @keyframes admin-input-border {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    
    @keyframes admin-panel-pulse {
        0%, 100% {
            opacity: 0.1;
        }
        50% {
            opacity: 0.3;
        }
    }
    
    @media (max-width: 768px) {
        .title {
            font-size: clamp(2rem, 6vw, 2.5rem);
            letter-spacing: 1px;
        }
        .header {
            padding: 35px;
        }
        .date {
            font-size: clamp(1.1rem, 3.5vw, 1.6rem);
        }
        .subtitle {
            font-size: clamp(1rem, 2.8vw, 1.3rem);
        }
        .section-title {
            font-size: clamp(1.2rem, 3.5vw, 1.5rem);
            margin: 30px 0 20px;
        }
        .items-grid {
            grid-template-columns: 1fr;
        }
        .additional-items-grid {
            grid-template-columns: 1fr;
        }
        .item-controls {
            flex-direction: column;
            gap: 10px;
        }
        .add-item-controls {
            flex-direction: column;
            gap: 10px;
        }
        .add-item-input {
            min-width: unset;
            width: 100%;
        }
        .taken-controls {
            flex-direction: column;
            gap: 10px;
            align-items: stretch;
        }
        .name-input {
            width: 100%;
        }
        .person-entry {
            padding: 6px 10px;
        }
        .persons-list {
            max-height: 120px;
        }
        .thank-you-text {
            font-size: clamp(2rem, 8vw, 4rem);
        }
        .export-btn {
            display: block;
            margin: 10px auto;
            width: 80%;
        }
        .admin-input {
            width: 100%;
            margin-bottom: 20px;
            max-width: 300px;
        }
        .admin-input-container {
            width: 100%;
            max-width: 300px;
            margin: 0 auto 20px;
        }
        .admin-btn {
            width: 100%;
            max-width: 300px;
        }
        .admin-title {
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
        }
        .particle {
            width: 2px;
            height: 2px;
        }
        .matrix-line {
            width: 1px;
            height: 15px;
        }
    }
    
    @media (max-width: 480px) {
        .title {
            font-size: clamp(1.8rem, 5.5vw, 2rem);
            letter-spacing: 0px;
        }
        .date {
            font-size: clamp(1rem, 3vw, 1.3rem);
        }
        .subtitle {
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
        }
        .section-title {
            font-size: clamp(1rem, 3vw, 1.2rem);
            margin: 25px 0 15px;
        }
        .container {
            padding: 15px;
        }
        .header {
            padding: 25px;
        }
        .admin-section {
            padding: 15px;
        }
        .admin-panel {
            padding: 15px;
        }
        .admin-title {
            font-size: clamp(1rem, 2vw, 1.3rem);
            margin-bottom: 25px;
        }
        .admin-input {
            width: 100%;
            max-width: 280px;
            font-size: 1rem;
            padding: 12px 15px;
        }
        .admin-btn {
            width: 100%;
            max-width: 280px;
            padding: 12px 25px;
            font-size: 1rem;
        }
        .logout-btn {
            float: none;
            display: block;
            margin: 0 auto 15px;
            width: 100%;
            max-width: 200px;
        }
        .person-entry {
            padding: 5px 8px;
            font-size: 0.9rem;
        }
        .persons-list {
            max-height: 100px;
        }
        .add-item-card {
            padding: 15px;
        }
        .additional-item-card {
            padding: 15px;
        }
        .particle {
            width: 1.5px;
            height: 1.5px;
        }
        .matrix-line {
            width: 1px;
            height: 12px;
        }
    }
</style>
</head>
<body>
<div class="stars"></div>
<div class="neon-lines"></div>
<div class="laser-background">
    <div class="laser-beam"></div>
    <div class="laser-beam"></div>
    <div class="laser-beam"></div>
    <div class="laser-beam"></div>
</div>

<div class="container">
    <div class="header">
        <h1 class="title">4 x 40 B-DAY-BASH</h1>
        <div class="date">01. - 03. 08. 2025</div>
        <div class="subtitle">Partybeitr√§ge ‚Ä¢ Anglerheim Jena</div>
        <div class="sync-status" id="syncStatus">
            <div class="status-text" id="statusText">‚è≥ Verbindung wird aufgebaut...</div>
            <div class="sync-details" id="syncDetails">JSONBin.io wird initialisiert</div>
        </div>
    </div>

    <div class="section-title">üéØ Ben√∂tigte Partybeitr√§ge</div>
    <div class="items-grid" id="itemsGrid">
        </div>

    <div class="additional-section">
        <div class="section-title highlighted-plus">‚ûï Weitere Partybeitr√§ge</div>
        <div class="additional-items-grid" id="additionalItemsGrid">
            </div>
        <div class="add-item-card">
            <div class="add-item-title">Neuen Partybeitrag vorschlagen</div>
            <div class="additional-note">Hier kannst du weitere Dinge eintragen, die du zur Party beitragen m√∂chtest</div>
            <div class="add-item-controls">
                <input class="add-item-input" id="newItemInput" placeholder="z.B. Chips, Getr√§nke, Deko..." type="text"/>
                <button class="btn btn-add" onclick="addNewItem()">Hinzuf√ºgen</button>
            </div>
        </div>
    </div>

    <div class="thank-you-overlay" id="thankYouOverlay">
        <div class="thank-you-content">
            <div class="retro-grid"></div>
            <div class="laser-lines">
                <div class="laser-line" style="width: 300px; animation-delay: 0s;"></div>
                <div class="laser-line" style="width: 400px; animation-delay: 0.3s;"></div>
                <div class="laser-line" style="width: 250px; animation-delay: 0.6s;"></div>
            </div>
            <div class="thank-you-text">DANKE!</div>
            <div class="thank-you-subtext">Vielen Dank f√ºr Ihre Anmeldung!</div>
        </div>
    </div>

    <div class="admin-section">
        <div class="admin-login-bg"></div>
        <div class="admin-login" id="adminLogin">
            <div class="admin-title">üîê ADMIN ACCESS</div>
            <div class="admin-input-container">
                <input class="admin-input" id="adminPassword" placeholder="Enter Password" type="password"/>
                <div class="admin-input-glow"></div>
            </div>
            <br/>
            <button class="admin-btn" onclick="adminLogin()">
                <span>Initialize</span>
            </button>
        </div>

        <div class="admin-controls" id="adminControls">
            <button class="logout-btn" onclick="adminLogout()">Logout</button>
            <div class="admin-panel">
                <h3>‚öôÔ∏è SYSTEM CONTROL</h3>
                <div class="export-section" id="exportSection">
                    <button class="export-btn" onclick="exportToCSV()">üìä CSV Export</button>
                    <button class="export-btn" onclick="exportToExcel()">üìà Excel Export</button>
                    <button class="export-btn" onclick="forceSync()">üîÑ Force Sync</button>
                    <button class="export-btn" onclick="showShareLink()">üîó Share Link</button>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <h3>4 x 40 B-Day-Bash</h3>
        <p>¬© 2025 All rights reserved.</p>
    </div>
</div>

<script>
// ===================================================================
// GLOBALE VARIABLEN - KOMPLETT NEU MIT JSONBIN.IO
// ===================================================================

console.log("üöÄ === PARTY BEITR√ÑGE APP - JSONBIN VERSION ===");

// JSONBin.io Konfiguration - AKTUALISIERT mit neuem Access Key
const JSONBIN_CONFIG = {
    BIN_ID: '687910f5db4fa954e67c66bd',
    ACCESS_KEY: '$2a$10$N5gYVuZHvchDU6632EJeAuls.fEy0y6DFy0l0OUVktQUnRz4.U7YC',
    BASE_URL: 'https://api.jsonbin.io/v3/b/'
};

// Synchronisation
var isOnline = false;
var syncInterval = null;
var lastSyncTime = 0;
var isSyncing = false;

// Admin
const ADMIN_PASSWORD = "admin";

// Datenstruktur mit 11 Standard-Items
var data = {
    items: [
        { id: "nudelsalat", name: "Nudelsalat", persons: [] },
        { id: "kartoffelsalat", name: "Kartoffelsalat", persons: [] },
        { id: "kraeuterbutter", name: "Kr√§uterbutter", persons: [] },
        { id: "nutella-erdnussbutter", name: "Nutella, Erdnussbutter", persons: [] },
        { id: "kuchen", name: "Kuchen", persons: [] },
        { id: "marmelade-honig", name: "Marmelade, Honig", persons: [] },
        { id: "aufschnitt-wurst-kaese", name: "Aufschnitt (Wurst, K√§se)", persons: [] },
        { id: "aufstriche-herzhaft", name: "Aufstriche (herzhaft)", persons: [] },
        { id: "stockbrot-teig", name: "Stockbrot-Teig", persons: [] },
        { id: "dessert", name: "Dessert", persons: [] },
        { id: "cole-slaw", name: "Cole Slaw", persons: [] }
    ],
    additionalItems: [],
    lastUpdate: Date.now(),
    version: "1.0.0"
};

// Reaktionen
const thankYouReactions = [
    "üôè Daaaaaank√∂√∂√∂! üôè",
    "üíï Du bist die/der Geilste! üíï",
    "üí£ Hammer-fett-bombe-krass! üí£",
    "ü•∞ Echt?! Thnx!!! ü•∞",
    "üõü Du bist die Rettung üõü",
    "‚ù§Ô∏è Ich hasse alle: Au√üer DICH! ‚ù§Ô∏è",
    "‚ù§Ô∏è‚Äçüî• Wir lieben Dich! ‚ù§Ô∏è‚Äçüî•"
];

const goodbyeReactions = [
    "üëã Schade, bis zum n√§chsten Mal!",
    "üíî Wir werden dich vermissen!",
    "ü´° Verstanden, abgemeldet.",
    "üò• Komm bald wieder!",
    "üí® Tsch√ºssikowski!",
    "üëã Bleib sauber!",
    "ü´° Bis bald, Cowboy!"
];

console.log("‚úÖ Globale Variablen initialisiert");

// ===================================================================
// HILFSFUNKTIONEN
// ===================================================================

function getRandomReaction(reactionList) {
    return reactionList[Math.floor(Math.random() * reactionList.length)];
}

function updateSyncStatus(status, message, details = '') {
    console.log(`üì° Status Update: ${status} - ${message}`);
    
    const statusDiv = document.getElementById('syncStatus');
    const statusText = document.getElementById('statusText');
    const syncDetails = document.getElementById('syncDetails');
    
    if (statusDiv && statusText) {
        statusDiv.className = 'sync-status ' + status;
        statusText.textContent = message;
        
        if (syncDetails) {
            syncDetails.textContent = details;
        }
    }
}

function debugData() {
    console.log("üîç === DEBUG INFO ===");
    console.log("üåê Online:", isOnline);
    console.log("üìä Items:", data.items.length);
    console.log("‚ûï Additional Items:", data.additionalItems.length);
    console.log("üïê Last Update:", new Date(data.lastUpdate).toLocaleString());
    console.log("üîÑ Is Syncing:", isSyncing);
    console.log("üì° Sync Interval:", syncInterval ? 'Aktiv' : 'Inaktiv');
}

// ===================================================================
// JSONBIN.IO API FUNKTIONEN - KOMPLETT NEU
// ===================================================================

async function testJSONBinConnection() {
    console.log("üîå Teste JSONBin-Verbindung...");
    
    try {
        const response = await fetch(`${JSONBIN_CONFIG.BASE_URL}${JSONBIN_CONFIG.BIN_ID}`, {
            method: 'GET',
            headers: {
                'X-Access-Key': JSONBIN_CONFIG.ACCESS_KEY
            }
        });
        
        console.log("üì° Test Response Status:", response.status);
        
        if (response.ok) {
            const result = await response.json();
            console.log("‚úÖ JSONBin-Verbindung erfolgreich!");
            console.log("üìä Erhaltene Daten:", result);
            return true;
        } else {
            console.error("‚ùå JSONBin-Verbindung fehlgeschlagen:", response.status, response.statusText);
            return false;
        }
    } catch (error) {
        console.error("‚ùå JSONBin-Verbindungsfehler:", error);
        return false;
    }
}

async function loadDataFromJSONBin() {
    console.log("üì• === LADE DATEN VON JSONBIN ===");
    
    try {
        updateSyncStatus('syncing', 'üîÑ Daten werden geladen...', 'Verbindung zu JSONBin.io');
        
        const response = await fetch(`${JSONBIN_CONFIG.BASE_URL}${JSONBIN_CONFIG.BIN_ID}`, {
            method: 'GET',
            headers: {
                'X-Access-Key': JSONBIN_CONFIG.ACCESS_KEY
            }
        });
        
        console.log("üì° Load Response Status:", response.status);
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        const result = await response.json();
        console.log("üìä Rohdaten von JSONBin:", result);
        
        if (result.record && typeof result.record === 'object') {
            const loadedData = result.record;
            console.log("‚úÖ Daten erfolgreich geladen:", loadedData);
            
            // Merge mit Standard-Items
            if (loadedData.items && Array.isArray(loadedData.items)) {
                console.log("üîÑ Merge Items mit Standard-Items");
                data.items = data.items.map(defaultItem => {
                    const loadedItem = loadedData.items.find(item => item.id === defaultItem.id);
                    return loadedItem ? { ...defaultItem, ...loadedItem } : defaultItem;
                });
            }
            
            // Additional Items √ºbernehmen
            if (loadedData.additionalItems && Array.isArray(loadedData.additionalItems)) {
                data.additionalItems = loadedData.additionalItems;
            }
            
            // Metadaten √ºbernehmen
            data.lastUpdate = loadedData.lastUpdate || Date.now();
            data.version = loadedData.version || "1.0.0";
            
            isOnline = true;
            updateSyncStatus('connected', '‚úÖ Online - Synchronisation aktiv', 'Verbunden mit JSONBin.io');
            
            console.log("‚úÖ Daten erfolgreich gemerged!");
            return true;
        } else {
            console.warn("‚ö†Ô∏è Keine g√ºltigen Daten in Response:", result);
            throw new Error("Ung√ºltige Datenstruktur");
        }
        
    } catch (error) {
        console.error("‚ùå Fehler beim Laden:", error);
        isOnline = false;
        updateSyncStatus('disconnected', '‚ùå Offline - Lokaler Modus', 'Verbindung zu JSONBin.io fehlgeschlagen');
        
        // Fallback auf localStorage
        return await loadFromLocalStorage();
    }
}

async function saveDataToJSONBin() {
    console.log("üíæ === SPEICHERE DATEN ZU JSONBIN ===");
    
    if (isSyncing) {
        console.log("‚è≥ Sync bereits aktiv - √ºberspringe");
        return false;
    }
    
    try {
        isSyncing = true;
        updateSyncStatus('syncing', 'üîÑ Daten werden gespeichert...', '√úbertragung zu JSONBin.io');
        
        // Aktualisiere Metadaten
        data.lastUpdate = Date.now();
        data.version = "1.0.0";
        
        console.log("üì§ Sende Daten:", data);
        
        const response = await fetch(`${JSONBIN_CONFIG.BASE_URL}${JSONBIN_CONFIG.BIN_ID}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'X-Access-Key': JSONBIN_CONFIG.ACCESS_KEY
            },
            body: JSON.stringify(data)
        });
        
        console.log("üì° Save Response Status:", response.status);
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        const result = await response.json();
        console.log("‚úÖ Speichern erfolgreich:", result);
        
        // Lokalen Backup speichern
        await saveToLocalStorage();
        
        isOnline = true;
        updateSyncStatus('connected', '‚úÖ Online - Synchronisation aktiv', `Letztes Update: ${new Date().toLocaleTimeString()}`);
        
        return true;
        
    } catch (error) {
        console.error("‚ùå Fehler beim Speichern:", error);
        isOnline = false;
        updateSyncStatus('disconnected', '‚ùå Offline - Nur lokale Speicherung', 'Verbindung zu JSONBin.io fehlgeschlagen');
        
        // Fallback auf localStorage
        await saveToLocalStorage();
        return false;
    } finally {
        isSyncing = false;
    }
}

async function checkForUpdates() {
    if (!isOnline || isSyncing) return;
    
    console.log("üîÑ Pr√ºfe auf Updates...");
    
    try {
        const response = await fetch(`${JSONBIN_CONFIG.BASE_URL}${JSONBIN_CONFIG.BIN_ID}`, {
            method: 'GET',
            headers: {
                'X-Access-Key': JSONBIN_CONFIG.ACCESS_KEY
            }
        });
        
        if (response.ok) {
            const result = await response.json();
            if (result.record && result.record.lastUpdate > data.lastUpdate) {
                console.log("üîÑ Neue Daten verf√ºgbar - lade Updates");
                await loadDataFromJSONBin();
                createItemCards();
                createAdditionalItemCards();
                console.log("‚úÖ Updates geladen und UI aktualisiert");
            } else {
                console.log("‚ÑπÔ∏è Keine neuen Updates verf√ºgbar");
            }
        }
    } catch (error) {
        console.warn("‚ö†Ô∏è Update-Check fehlgeschlagen:", error);
    }
}

// ===================================================================
// LOKALER SPEICHER FALLBACK
// ===================================================================

async function saveToLocalStorage() {
    try {
        localStorage.setItem('partyDataBackup', JSON.stringify(data));
        console.log("üíæ Lokaler Backup gespeichert");
    } catch (error) {
        console.error("‚ùå Lokaler Backup fehlgeschlagen:", error);
    }
}

async function loadFromLocalStorage() {
    try {
        const savedData = localStorage.getItem('partyDataBackup');
        if (savedData) {
            const parsedData = JSON.parse(savedData);
            
            // Merge mit Standard-Items
            if (parsedData.items && Array.isArray(parsedData.items)) {
                data.items = data.items.map(defaultItem => {
                    const loadedItem = parsedData.items.find(item => item.id === defaultItem.id);
                    return loadedItem ? { ...defaultItem, ...loadedItem } : defaultItem;
                });
            }
            
            data.additionalItems = parsedData.additionalItems || [];
            data.lastUpdate = parsedData.lastUpdate || Date.now();
            
            console.log("üì¶ Lokale Daten geladen als Fallback");
            return true;
        }
    } catch (error) {
        console.error("‚ùå Lokale Daten besch√§digt:", error);
    }
    return false;
}

// ===================================================================
// AUTO-SYNC FUNKTIONEN
// ===================================================================

function startAutoSync() {
    console.log("‚è∞ Starte Auto-Sync (alle 15 Sekunden)");
    
    if (syncInterval) {
        clearInterval(syncInterval);
    }
    
    syncInterval = setInterval(async () => {
        if (isOnline && !isSyncing) {
            await checkForUpdates();
        }
    }, 15000); // Alle 15 Sekunden
}

function stopAutoSync() {
    if (syncInterval) {
        clearInterval(syncInterval);
        syncInterval = null;
        console.log("‚èπÔ∏è Auto-Sync gestoppt");
    }
}

// ===================================================================
// UI FUNKTIONEN
// ===================================================================

function createItemCards() {
    console.log("üéØ === ERSTELLE ITEM CARDS ===");
    
    const itemsGrid = document.getElementById('itemsGrid');
    if (!itemsGrid) {
        console.error("‚ùå itemsGrid nicht gefunden!");
        return;
    }
    
    itemsGrid.innerHTML = '';
    
    if (!data.items || data.items.length === 0) {
        console.error("‚ùå Keine Items verf√ºgbar!");
        itemsGrid.innerHTML = '<div style="color: red; padding: 20px; border: 2px solid red;">‚ùå FEHLER: Keine Items verf√ºgbar!</div>';
        return;
    }
    
    data.items.forEach((item, index) => {
        console.log(`üì¶ Erstelle Item Card ${index + 1}: ${item.name}`);
        
        const itemCard = document.createElement('div');
        itemCard.classList.add('item-card');
        
        if (item.persons && item.persons.length > 0) {
            itemCard.classList.add('taken');
        }

        let personsListHtml = '';
        if (item.persons && Array.isArray(item.persons)) {
            personsListHtml = item.persons.map(person => `
                <div class="person-entry">
                    <span class="person-name">${person}</span>
                    <button class="btn-small btn-unregister" onclick="unregisterPerson('${item.id}', '${person}', false)">X</button>
                </div>
            `).join('');
        }

        itemCard.innerHTML = `
            <div class="item-name">${item.name}</div>
            ${item.persons && item.persons.length > 0 ? `<div class="item-counter">${item.persons.length} ${item.persons.length === 1 ? 'Person' : 'Personen'}</div>` : ''}
            <div class="persons-list">${personsListHtml}</div>
            <div class="item-controls">
                <input type="text" class="name-input" id="input-${item.id}" placeholder="Dein Name"/>
                <button class="btn btn-take" onclick="registerPerson('${item.id}', false)">Eintragen</button>
            </div>
        `;
        
        itemsGrid.appendChild(itemCard);

        const inputElement = itemCard.querySelector(`#input-${item.id}`);
        if (inputElement) {
            inputElement.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    registerPerson(item.id, false);
                }
            });
        }
    });
    
    console.log("‚úÖ Item Cards erfolgreich erstellt");
}

function createAdditionalItemCards() {
    console.log("üéØ === ERSTELLE ADDITIONAL ITEM CARDS ===");
    
    const additionalItemsGrid = document.getElementById('additionalItemsGrid');
    if (!additionalItemsGrid) {
        console.error("‚ùå additionalItemsGrid nicht gefunden!");
        return;
    }
    
    additionalItemsGrid.innerHTML = '';

    if (data.additionalItems && data.additionalItems.length > 0) {
        data.additionalItems.forEach(item => {
            const itemCard = document.createElement('div');
            itemCard.classList.add('additional-item-card');

            let personsListHtml = '';
            if (item.persons && Array.isArray(item.persons)) {
                personsListHtml = item.persons.map(person => `
                    <div class="person-entry">
                        <span class="person-name">${person}</span>
                        <button class="btn-small btn-unregister" onclick="unregisterPerson('${item.id}', '${person}', true)">X</button>
                    </div>
                `).join('');
            }

            itemCard.innerHTML = `
                <div class="additional-item-name">${item.name}</div>
                ${item.persons && item.persons.length > 0 ? `<div class="item-counter">${item.persons.length} ${item.persons.length === 1 ? 'Person' : 'Personen'}</div>` : ''}
                <div class="persons-list">${personsListHtml}</div>
                <div class="item-controls">
                    <input type="text" class="name-input" id="input-${item.id}" placeholder="Dein Name"/>
                    <button class="btn btn-take" onclick="registerPerson('${item.id}', true)">Eintragen</button>
                </div>
            `;
            additionalItemsGrid.appendChild(itemCard);

            const inputElement = itemCard.querySelector(`#input-${item.id}`);
            if (inputElement) {
                inputElement.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        registerPerson(item.id, true);
                    }
                });
            }
        });
    }
    
    console.log("‚úÖ Additional Item Cards erfolgreich erstellt");
}

// ===================================================================
// ANIMATIONEN UND EFFEKTE
// ===================================================================

function showThankYouEffect(message) {
    const overlay = document.getElementById('thankYouOverlay');
    const thankYouText = overlay.querySelector('.thank-you-text');
    const thankYouSubtext = overlay.querySelector('.thank-you-subtext');

    thankYouText.textContent = getRandomReaction(thankYouReactions);
    thankYouSubtext.textContent = message || "Vielen Dank f√ºr Ihre Anmeldung!";

    overlay.classList.add('show');
    createParticles(100, overlay);
    createMatrixEffect(overlay);
    createScanlineEffect(overlay);

    setTimeout(() => {
        overlay.classList.remove('show');
        overlay.innerHTML = `<div class="thank-you-content">
                                <div class="retro-grid"></div>
                                <div class="laser-lines">
                                    <div class="laser-line" style="width: 300px; animation-delay: 0s;"></div>
                                    <div class="laser-line" style="width: 400px; animation-delay: 0.3s;"></div>
                                    <div class="laser-line" style="width: 250px; animation-delay: 0.6s;"></div>
                                </div>
                                <div class="thank-you-text">DANKE!</div>
                                <div class="thank-you-subtext">Vielen Dank f√ºr Ihre Anmeldung!</div>
                            </div>`;
    }, 4000);
}

function showGoodbyeEffect(message) {
    const overlay = document.getElementById('thankYouOverlay');
    const thankYouText = overlay.querySelector('.thank-you-text');
    const thankYouSubtext = overlay.querySelector('.thank-you-subtext');

    thankYouText.textContent = getRandomReaction(goodbyeReactions);
    thankYouSubtext.textContent = message || "Auf Wiedersehen!";

    overlay.classList.add('show');
    createParticles(100, overlay, 'orange');
    createMatrixEffect(overlay, 'orange');
    createScanlineEffect(overlay, 'orange');

    setTimeout(() => {
        overlay.classList.remove('show');
        overlay.innerHTML = `<div class="thank-you-content">
                                <div class="retro-grid"></div>
                                <div class="laser-lines">
                                    <div class="laser-line" style="width: 300px; animation-delay: 0s;"></div>
                                    <div class="laser-line" style="width: 400px; animation-delay: 0.3s;"></div>
                                    <div class="laser-line" style="width: 250px; animation-delay: 0.6s;"></div>
                                </div>
                                <div class="thank-you-text">DANKE!</div>
                                <div class="thank-you-subtext">Vielen Dank f√ºr Ihre Anmeldung!</div>
                            </div>`;
    }, 4000);
}

function createParticles(count, container, colorClass = '') {
    for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        if (colorClass) particle.classList.add(`particle-${colorClass}`);
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 2}s`;
        container.appendChild(particle);
    }
}

function createMatrixEffect(container, colorClass = '') {
    const matrixEffect = document.createElement('div');
    matrixEffect.classList.add('matrix-effect');
    container.appendChild(matrixEffect);

    for (let i = 0; i < 30; i++) {
        const line = document.createElement('div');
        line.classList.add('matrix-line');
        if (colorClass) line.classList.add(`matrix-line-${colorClass}`);
        line.style.left = `${Math.random() * 100}%`;
        line.style.animationDuration = `${2 + Math.random() * 3}s`;
        line.style.animationDelay = `${Math.random() * 2}s`;
        matrixEffect.appendChild(line);
    }
}

function createScanlineEffect(container, colorClass = '') {
    const scanline = document.createElement('div');
    scanline.classList.add('scanline');
    if (colorClass) scanline.classList.add(`scanline-${colorClass}`);
    scanline.style.animationDuration = `${1 + Math.random() * 2}s`;
    container.appendChild(scanline);
}

function createStars() {
    const starsContainer = document.querySelector('.stars');
    for (let i = 0; i < 100; i++) {
        const star = document.createElement('div');
        star.classList.add('star');
        star.style.top = `${Math.random() * 100}%`;
        star.style.left = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 2}s`;
        starsContainer.appendChild(star);
    }
}

function createNeonLines() {
    const neonLinesContainer = document.querySelector('.neon-lines');
    for (let i = 0; i < 5; i++) {
        const line = document.createElement('div');
        line.classList.add('neon-line');
        line.style.top = `${Math.random() * 100}%`;
        line.style.animationDelay = `${Math.random() * 2}s`;
        line.style.animationDuration = `${3 + Math.random() * 2}s`;
        neonLinesContainer.appendChild(line);
    }
}

// ===================================================================
// PERSON EINTRAGEN/AUSTRAGEN
// ===================================================================

async function registerPerson(itemId, isAdditional) {
    console.log(`üë§ === REGISTRIERE PERSON: ${itemId} (Additional: ${isAdditional}) ===`);
    
    const inputElement = document.getElementById(`input-${itemId}`);
    const personName = inputElement.value.trim();

    if (!personName) {
        alert('Bitte gib deinen Namen ein!');
        return;
    }

    let itemArray = isAdditional ? data.additionalItems : data.items;
    let item = itemArray.find(i => i.id === itemId);

    if (!item) {
        console.error(`‚ùå Item mit ID ${itemId} nicht gefunden!`);
        return;
    }

    // Pr√ºfe ob Name bereits existiert
    const existingPerson = item.persons.find(p => p.toLowerCase() === personName.toLowerCase());
    if (existingPerson) {
        alert('Dieser Name ist bereits eingetragen!');
        return;
    }
    
    // F√ºge Person hinzu
    item.persons.push(personName);
    inputElement.value = '';
    
    console.log(`‚úÖ Person "${personName}" zu "${item.name}" hinzugef√ºgt`);
    
    // Speichere sofort
    await saveDataToJSONBin();
    
    // Aktualisiere UI
    createItemCards();
    createAdditionalItemCards();
    
    showThankYouEffect(`"${personName}" erfolgreich eingetragen!`);
}

async function unregisterPerson(itemId, personName, isAdditional) {
    console.log(`üë§ === ENTFERNE PERSON: ${personName} von ${itemId} ===`);
    
    let itemArray = isAdditional ? data.additionalItems : data.items;
    let item = itemArray.find(i => i.id === itemId);

    if (!item) {
        console.error(`‚ùå Item mit ID ${itemId} nicht gefunden!`);
        return;
    }

    if (confirm(`M√∂chtest du "${personName}" wirklich von "${item.name}" austragen?`)) {
        // Entferne Person
        item.persons = item.persons.filter(p => p !== personName);
        
        console.log(`‚úÖ Person "${personName}" von "${item.name}" entfernt`);
        
        // Speichere sofort
        await saveDataToJSONBin();
        
        // Aktualisiere UI
        createItemCards();
        createAdditionalItemCards();
        
        showGoodbyeEffect(`"${personName}" erfolgreich ausgetragen!`);
    }
}

async function addNewItem() {
    console.log("‚ûï === F√úGE NEUES ITEM HINZU ===");
    
    const newItemInput = document.getElementById('newItemInput');
    const newItemName = newItemInput.value.trim();

    if (!newItemName) {
        alert('Bitte gib einen Namen f√ºr den neuen Beitrag ein!');
        return;
    }

    const newItemId = newItemName.toLowerCase().replace(/[^a-z0-9]/g, '-');
    
    // Pr√ºfe ob Item bereits existiert
    const existingItem = data.items.find(item => item.id === newItemId) || 
                        data.additionalItems.find(item => item.id === newItemId);

    if (existingItem) {
        alert('Dieser Beitrag existiert bereits!');
        return;
    }

    // F√ºge neues Item hinzu
    data.additionalItems.push({
        id: newItemId,
        name: newItemName,
        persons: []
    });
    
    newItemInput.value = '';
    
    console.log(`‚úÖ Neues Item "${newItemName}" hinzugef√ºgt`);
    
    // Speichere sofort
    await saveDataToJSONBin();
    
    // Aktualisiere UI
    createAdditionalItemCards();
    
    showThankYouEffect(`"${newItemName}" erfolgreich hinzugef√ºgt!`);
}

// ===================================================================
// ADMIN FUNKTIONEN
// ===================================================================

function adminLogin() {
    const passwordInput = document.getElementById('adminPassword');
    if (passwordInput.value === ADMIN_PASSWORD) {
        document.getElementById('adminLogin').style.display = 'none';
        document.getElementById('adminControls').style.display = 'block';
        document.getElementById('exportSection').style.display = 'block';
        console.log("‚úÖ Admin Login erfolgreich");
    } else {
        alert('Falsches Passwort!');
    }
    passwordInput.value = '';
}

function adminLogout() {
    document.getElementById('adminLogin').style.display = 'block';
    document.getElementById('adminControls').style.display = 'none';
    document.getElementById('exportSection').style.display = 'none';
    console.log("‚úÖ Admin Logout erfolgreich");
}

function exportToCSV() {
    console.log("üìä === CSV EXPORT ===");
    
    let csvContent = "data:text/csv;charset=utf-8,";
    csvContent += "Kategorie,Beitrag,Name,Anzahl_Eingetragen\n";

    data.items.forEach(item => {
        if (item.persons.length > 0) {
            item.persons.forEach(person => {
                csvContent += `Ben√∂tigt,"${item.name}","${person}",${item.persons.length}\n`;
            });
        } else {
            csvContent += `Ben√∂tigt,"${item.name}",,0\n`;
        }
    });

    data.additionalItems.forEach(item => {
        if (item.persons.length > 0) {
            item.persons.forEach(person => {
                csvContent += `Weitere Beitr√§ge,"${item.name}","${person}",${item.persons.length}\n`;
            });
        } else {
            csvContent += `Weitere Beitr√§ge,"${item.name}",,0\n`;
        }
    });

    const encodedUri = encodeURI(csvContent);
    const link = document.createElement("a");
    link.setAttribute("href", encodedUri);
    link.setAttribute("download", "party_beitraege.csv");
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    
    showThankYouEffect("CSV Export erfolgreich!");
}

function exportToExcel() {
    exportToCSV(); // Vereinfacht
}

async function forceSync() {
    console.log("üîÑ === FORCE SYNC ===");
    
    // Stoppe Auto-Sync tempor√§r
    stopAutoSync();
    
    try {
        // Erst speichern, dann laden
        await saveDataToJSONBin();
        await loadDataFromJSONBin();
        
        // UI aktualisieren
        createItemCards();
        createAdditionalItemCards();
        
        showThankYouEffect("Synchronisation erfolgreich!");
    } catch (error) {
        console.error("‚ùå Force Sync Fehler:", error);
        alert("Synchronisation fehlgeschlagen!");
    }
    
    // Auto-Sync wieder starten
    startAutoSync();
}

function showShareLink() {
    const currentUrl = window.location.href;
    const textArea = document.createElement('textarea');
    textArea.value = currentUrl;
    document.body.appendChild(textArea);
    textArea.select();
    
    try {
        document.execCommand('copy');
        showThankYouEffect("Link kopiert!");
    } catch (err) {
        alert(`Link: ${currentUrl}`);
    }
    
    document.body.removeChild(textArea);
}

// ===================================================================
// NOTFALL UND DEBUG FUNKTIONEN
// ===================================================================

window.forceCreateItems = function() {
    console.log("üö® NOTFALL: Force Create Items");
    createItemCards();
    createAdditionalItemCards();
}

window.forceDebug = function() {
    debugData();
}

window.forceSync = forceSync;

window.testConnection = testJSONBinConnection;

// ===================================================================
// INITIALISIERUNG
// ===================================================================

document.addEventListener('DOMContentLoaded', async function() {
    console.log("üöÄ ========================================");
    console.log("üöÄ DOM LOADED - PARTY BEITR√ÑGE APP START");
    console.log("üöÄ ========================================");
    
    try {
        // Pr√ºfe HTML-Elemente
        const itemsGrid = document.getElementById('itemsGrid');
        if (!itemsGrid) {
            console.error("‚ùå KRITISCH: itemsGrid nicht gefunden!");
            alert("KRITISCHER FEHLER: HTML-Struktur unvollst√§ndig!");
            return;
        }
        
        // UI-Grundlagen erstellen
        createStars();
        createNeonLines();
        
        // Teste Verbindung
        console.log("üîå Teste JSONBin-Verbindung...");
        const connectionOk = await testJSONBinConnection();
        
        if (connectionOk) {
            console.log("‚úÖ Verbindung erfolgreich!");
        } else {
            console.warn("‚ö†Ô∏è Verbindung fehlgeschlagen - verwende lokalen Modus");
        }
        
        // Daten laden
        console.log("üì• Lade Daten...");
        await loadDataFromJSONBin();
        
        // UI erstellen
        console.log("üé® Erstelle UI...");
        createItemCards();
        createAdditionalItemCards();
        
        // Auto-Sync starten
        startAutoSync();
        
        // Event Listeners
        const newItemInput = document.getElementById('newItemInput');
        if (newItemInput) {
            newItemInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    addNewItem();
                }
            });
        }
        
        const adminPassword = document.getElementById('adminPassword');
        if (adminPassword) {
            adminPassword.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    adminLogin();
                }
            });
        }
        
        // Admin Focus-Effekte
        const adminInput = document.getElementById('adminPassword');
        const adminGlow = document.querySelector('.admin-input-glow');
        if (adminInput && adminGlow) {
            adminInput.addEventListener('focus', function() {
                adminGlow.style.opacity = '1';
            });
            adminInput.addEventListener('blur', function() {
                adminGlow.style.opacity = '0';
            });
        }
        
        console.log("‚úÖ ========================================");
        console.log("‚úÖ APP ERFOLGREICH INITIALISIERT!");
        console.log("‚úÖ ========================================");
        
        // Debug-Info nach 3 Sekunden
        setTimeout(() => {
            console.log("üîç === 3-SEKUNDEN DEBUG ===");
            debugData();
            const grid = document.getElementById('itemsGrid');
            console.log("üìä itemsGrid Kinder:", grid ? grid.children.length : "NICHT GEFUNDEN");
            
            if (grid && grid.children.length === 0) {
                console.warn("‚ö†Ô∏è KEINE ITEMS ANGEZEIGT!");
                alert("WARNUNG: Keine Items sichtbar! √ñffne die Entwicklertools (F12) und schaue in die Konsole.");
            }
        }, 3000);
        
    } catch (error) {
        console.error("üí• KRITISCHER INITIALISIERUNGSFEHLER:", error);
        alert("KRITISCHER FEHLER: " + error.message);
    }
});

// Cleanup beim Verlassen der Seite
window.addEventListener('beforeunload', function() {
    stopAutoSync();
});

console.log("‚úÖ === SCRIPT VOLLST√ÑNDIG GELADEN ===");
